

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Signing a package &mdash; Conda   documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Conda   documentation" href="../../../index.html"/>
        <link rel="up" title="Building packages" href="index.html"/>
        <link rel="next" title="Adding Windows Start menu items" href="add-win-start-menu-items.html"/>
        <link rel="prev" title="Using shared libraries" href="use-shared-libraries.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Conda
          

          
          </a>

          
            
            
              <div class="version">
                 
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">User guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concepts.html">Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install/index.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration/index.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Tasks</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../manage-conda.html">Managing conda</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manage-environments.html">Managing environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manage-channels.html">Managing channels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../create-custom-channels.html">Creating custom channels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manage-pkgs.html">Managing packages</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Building packages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="install-conda-build.html">Installing and updating conda build</a></li>
<li class="toctree-l4"><a class="reference internal" href="package-spec.html">Conda package specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="package-naming-conv.html">Package naming conventions</a></li>
<li class="toctree-l4"><a class="reference internal" href="recipe.html">Conda build recipes</a></li>
<li class="toctree-l4"><a class="reference internal" href="define-metadata.html">Defining metadata (meta.yaml)</a></li>
<li class="toctree-l4"><a class="reference internal" href="build-scripts.html">Build scripts (build.sh, bld.bat)</a></li>
<li class="toctree-l4"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="environment-variables.html">Environment variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="make-relocatable.html">Making packages relocatable</a></li>
<li class="toctree-l4"><a class="reference internal" href="link-scripts.html">Adding pre-link, post-link and pre-unlink scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="variants.html">Build Variants</a></li>
<li class="toctree-l4"><a class="reference internal" href="use-shared-libraries.html">Using shared libraries</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Signing a package</a></li>
<li class="toctree-l4"><a class="reference internal" href="add-win-start-menu-items.html">Adding Windows Start menu items</a></li>
<li class="toctree-l4"><a class="reference internal" href="sample-recipes.html">Sample recipes</a></li>
<li class="toctree-l4"><a class="reference internal" href="build-without-recipe.html">Building a package without a recipe (bdist_conda)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../manage-python.html">Managing Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-r-with-conda.html">Using R with conda</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-mro-with-conda.html">Using Microsoft R Open with conda</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-conda-with-travis-ci.html">Using conda with Travis CI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../view-command-line-help.html">Viewing command-line help</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../cheatsheet.html">Cheat sheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../help-support.html">Help and support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release-notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../commands.html">Command reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../license.html">Conda license</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Conda</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">User guide</a> &raquo;</li>
        
          <li><a href="../index.html">Tasks</a> &raquo;</li>
        
          <li><a href="index.html">Building packages</a> &raquo;</li>
        
      <li>Signing a package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/conda/conda-docs/blob/master/docs/source/user-guide/tasks/build-packages/sign-packages.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="signing-a-package">
<h1>Signing a package<a class="headerlink" href="#signing-a-package" title="Permalink to this headline">¶</a></h1>
<p><em>Preview release</em></p>
<p>Conda can verify RSA signatures on conda packages, and
conda build can generate key pairs, sign conda packages
and add the required package metadata to the conda repository
index. Any key size is supported, and the default is 2048 bits.</p>
<p>Given any public/private key pair, you may sign any file using
the private key, and the other person who receives the file must
verify the signature against the public key to use the file. The
person verifying the signature is assured that the signature was
indeed created using the private key.</p>
<p>Signing requires the following to be installed:</p>
<ul class="simple">
<li>conda build.</li>
<li>PyCrypto installed into the root environment.</li>
</ul>
<p>Before signing, you should have the following knowledge and
experience:</p>
<ul class="simple">
<li>Experience with building conda packages.</li>
<li>Experience in setting up your own conda repository using the
<code class="docutils literal"><span class="pre">conda</span> <span class="pre">index</span></code> command.</li>
<li>Familiarity with the basics of public/private key cryptography.</li>
<li>Understanding of the concept of digital signatures.</li>
</ul>
<p>To sign packages:</p>
<ol class="arabic">
<li><p class="first">Create a public/private key pair. Each public/private key pair
is assigned a name, which is stored in the signature file such
that the client knows which public key to verify the signature
against.</p>
<p>EXAMPLE: With a public key named <code class="docutils literal"><span class="pre">MyKey</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">sign</span> <span class="o">--</span><span class="n">keygen</span> <span class="n">MyKey</span>
</pre></div>
</div>
</li>
<li><p class="first">Sign the packages by passing the conda packages that need to
be signed to the <code class="docutils literal"><span class="pre">conda</span> <span class="pre">sign</span></code> command.</p>
<p>EXAMPLE: To sign all packages in the Linux-64 directory:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">repository</span><span class="o">&gt;/</span><span class="n">linux</span><span class="o">-</span><span class="mi">64</span>
<span class="n">conda</span> <span class="n">sign</span> <span class="o">*.</span><span class="n">tar</span><span class="o">.</span><span class="n">bz2</span>
</pre></div>
</div>
<p>NOTE: Replace <code class="docutils literal"><span class="pre">&lt;repository&gt;</span></code> with the path to your
repository. You are not required to sign all conda packages.
You may choose which ones you wish to sign.</p>
<p>Next to all conda packages, <code class="docutils literal"><span class="pre">.sig</span></code> files appear.</p>
</li>
<li><p class="first">To verify that the signatures are valid, run the conda sign
verify command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">sign</span> <span class="o">--</span><span class="n">verify</span> <span class="o">*.</span><span class="n">tar</span><span class="o">.</span><span class="n">bz2</span>
</pre></div>
</div>
</li>
<li><p class="first">To index the repository, create or update the <code class="docutils literal"><span class="pre">repodata.json</span></code>
file by runnin the <code class="docutils literal"><span class="pre">conda</span> <span class="pre">index</span></code> command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">index</span>
</pre></div>
</div>
</li>
</ol>
<div class="section" id="using-the-signed-package">
<h2>Using the signed package<a class="headerlink" href="#using-the-signed-package" title="Permalink to this headline">¶</a></h2>
<p>To use the signed package, the client must have access to the
repository and must add the public key file to
their <code class="docutils literal"><span class="pre">~/.conda/keys</span></code> directory before installing the package.</p>
<p>EXAMPLE:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">~/.</span><span class="n">conda</span><span class="o">/</span><span class="n">keys</span>
<span class="n">cp</span> <span class="o">&lt;</span><span class="n">some</span> <span class="n">download</span> <span class="n">folder</span><span class="o">&gt;/</span><span class="n">foo</span><span class="o">.</span><span class="n">pub</span> <span class="o">~/.</span><span class="n">conda</span><span class="o">/</span><span class="n">keys</span>
</pre></div>
</div>
<p>When the client tries to install the signed package using the
<code class="docutils literal"><span class="pre">conda</span></code> command, conda attempts to verify the signature.</p>
<ul class="simple">
<li>Conda permits the installation if it finds the signature.</li>
<li>Conda exits if the signature is invalid, the signature is
not found or the public key is not installed.</li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="add-win-start-menu-items.html" class="btn btn-neutral float-right" title="Adding Windows Start menu items" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="use-shared-libraries.html" class="btn btn-neutral" title="Using shared libraries" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Anaconda, Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:' ',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27761864-11', 'auto');
  ga('send', 'pageview');

</script>


</body>
</html>