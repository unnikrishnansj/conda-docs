

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Conda build recipes &mdash; Conda   documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Conda   documentation" href="../../../index.html"/>
        <link rel="up" title="Building packages" href="index.html"/>
        <link rel="next" title="Defining metadata (meta.yaml)" href="define-metadata.html"/>
        <link rel="prev" title="Package naming conventions" href="package-naming-conv.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Conda
          

          
          </a>

          
            
            
              <div class="version">
                 
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">User guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concepts.html">Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install/index.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration/index.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Tasks</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../manage-conda.html">Managing conda</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manage-environments.html">Managing environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manage-channels.html">Managing channels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../create-custom-channels.html">Creating custom channels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manage-pkgs.html">Managing packages</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Building packages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="install-conda-build.html">Installing and updating conda build</a></li>
<li class="toctree-l4"><a class="reference internal" href="package-spec.html">Conda package specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="package-naming-conv.html">Package naming conventions</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Conda build recipes</a></li>
<li class="toctree-l4"><a class="reference internal" href="define-metadata.html">Defining metadata (meta.yaml)</a></li>
<li class="toctree-l4"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="environment-variables.html">Environment variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="make-relocatable.html">Making packages relocatable</a></li>
<li class="toctree-l4"><a class="reference internal" href="add-scripts.html">Adding pre-link, post-link and pre-unlink scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="variants.html">Build Variants</a></li>
<li class="toctree-l4"><a class="reference internal" href="use-shared-libraries.html">Using shared libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="sign-packages.html">Signing a package</a></li>
<li class="toctree-l4"><a class="reference internal" href="add-win-start-menu-items.html">Adding Windows Start menu items</a></li>
<li class="toctree-l4"><a class="reference internal" href="sample-recipes.html">Sample recipes</a></li>
<li class="toctree-l4"><a class="reference internal" href="build-without-recipe.html">Building a package without a recipe (bdist_conda)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../manage-python.html">Managing Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-r-with-conda.html">Using R with conda</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-mro-with-conda.html">Using Microsoft R Open with conda</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-conda-with-travis-ci.html">Using conda with Travis CI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../view-command-line-help.html">Viewing command-line help</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../cheatsheet.html">Cheat sheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../help-support.html">Help and support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release-notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../commands.html">Command reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../license.html">Conda license</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Conda</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">User guide</a> &raquo;</li>
        
          <li><a href="../index.html">Tasks</a> &raquo;</li>
        
          <li><a href="index.html">Building packages</a> &raquo;</li>
        
      <li>Conda build recipes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/conda/conda-docs/blob/master/docs/source/user-guide/tasks/build-packages/recipe.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="conda-build-recipes">
<h1>Conda build recipes<a class="headerlink" href="#conda-build-recipes" title="Permalink to this headline">¶</a></h1>
<p>To enable building conda packages, <a class="reference internal" href="install-conda-build.html"><span class="doc">install and update conda
and conda build</span></a>.</p>
<p>Building a conda package requires a recipe. A conda build recipe
is a flat directory that contains the following files:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">meta.yaml</span></code>—A file that contains all the metadata in the
recipe. Only <code class="docutils literal"><span class="pre">package/name</span></code> and <code class="docutils literal"><span class="pre">package/version</span></code> are
required.</li>
<li><code class="docutils literal"><span class="pre">build.sh</span></code>—The script that installs the files for the
package on macOS and Linux. It is executed using the <code class="docutils literal"><span class="pre">bash</span></code>
command.</li>
<li><code class="docutils literal"><span class="pre">bld.bat</span></code>—The build script that installs the files for the
package on Windows. It is executed using <code class="docutils literal"><span class="pre">cmd</span></code>.</li>
<li><code class="docutils literal"><span class="pre">run_test.[py,pl,sh,bat]</span></code>—An optional Python test file, a
test script that runs automatically if it is part of the recipe.</li>
<li>Optional patches that are applied to the source.</li>
<li>Other resources that are not included in the source and cannot
be generated by the build scripts. Examples are icon files,
readme files and build notes.</li>
</ul>
<p>TIP: When you use the <cite>conda skeleton &lt;skeleton_ref&gt;</cite> command,
the first 3 files—<code class="docutils literal"><span class="pre">meta.yaml</span></code>, <code class="docutils literal"><span class="pre">build.sh</span></code> and
<code class="docutils literal"><span class="pre">bld.bat</span></code>—are automatically generated for you.</p>
<div class="section" id="conda-build-process">
<h2>Conda build process<a class="headerlink" href="#conda-build-process" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">conda-build</span></code> performs the following steps:</p>
<ol class="arabic simple">
<li>Reads the metadata.</li>
<li>Downloads the source into a cache.</li>
<li>Extracts the source into the source directory.</li>
<li>Applies any patches.</li>
<li>Re-evaluates the metadata, if source is necessary to fill any
metadata values.</li>
<li>Creates a build environment, and then installs the build
dependencies there.</li>
<li>Runs the build script. The current working directory is the
source directory with environment variables set. The build
script installs into the build environment.</li>
<li>Performs some necessary post-processing steps, such as shebang
and rpath.</li>
<li>Creates a conda package containing all the files in the build
environment that are new from step 5, along with the necessary
conda package metadata.</li>
<li>Tests the new conda package if the recipe includes tests:<ol class="arabic">
<li>Deletes the build environment.</li>
<li>Creates a test environment with the package and its
dependencies.</li>
<li>Runs the test scripts.</li>
</ol>
</li>
</ol>
<p>The <a class="reference external" href="https://github.com/continuumio/conda-recipes">conda-recipes</a> repo
contains example recipes for many conda packages.</p>
<p>CAUTION: All recipe files, including <code class="docutils literal"><span class="pre">meta.yaml</span></code> and build
scripts, are included in the final package archive that is
distributed to users. Be careful not to put sensitive information
such as passwords into recipes where it could be made public.</p>
<p>The <cite>conda skeleton &lt;skeleton_ref&gt;</cite> command can help to make
skeleton recipes for common repositories, such as <a class="reference external" href="https://pypi.python.org/pypi">PyPI</a>.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="define-metadata.html" class="btn btn-neutral float-right" title="Defining metadata (meta.yaml)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="package-naming-conv.html" class="btn btn-neutral" title="Package naming conventions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Continuum Analytics.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:' ',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27761864-11', 'auto');
  ga('send', 'pageview');

</script>


</body>
</html>