

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorial: Basic tutorial for building a Conda package &mdash; Conda   documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Conda   documentation" href="../index.html"/>
        <link rel="up" title="Build tutorials" href="../build_tutorials.html"/>
        <link rel="next" title="Tutorial: Building the postgis package" href="postgis.html"/>
        <link rel="prev" title="Build tutorials" href="../build_tutorials.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> Conda</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#conda-overview">Conda Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#package-naming-conventions">Package Naming Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#meta-packages">Meta-Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#directory-structure">Directory Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#creating-python-3-4-or-python-2-6-environments">Creating Python 3.4 or Python 2.6 environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#update-anaconda-to-latest-version">Update Anaconda to latest version</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#silent-installation">Silent installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples/information.html">Informational Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/basic.html">Basic Package Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/advanced.html">Advanced Package Management</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Conda FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#table-of-contents">Table of contents:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#general-questions">General questions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#getting-help">Getting help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#searching-info">Searching &amp; info</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#customization-condarc-file">Customization (.condarc file)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#package-installation-in-the-root-environment">Package installation (in the root environment)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#updating-packages-in-the-root-environment">Updating packages (in the root environment)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#removing-packages-from-the-root-environment">Removing packages (from the root environment)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#environments">Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#recipes">Recipes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#issue-permission-denied-errors-during-install">Issue:  permission denied errors during install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#issue-conda-claims-that-a-package-is-installed-but-it-appears-not-to-be">Issue: Conda claims that a package is installed, but it appears not to be.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#issue-pkg-resources-distributionnotfound-conda-3-6-1-6-gb31b0d4-dirty">Issue: pkg_resources.DistributionNotFound: conda==3.6.1-6-gb31b0d4-dirty</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#issue-valueerror-unknown-locale-utf-8-on-mac-os-x">Issue: <tt class="docutils literal"><span class="pre">ValueError</span> <span class="pre">unknown</span> <span class="pre">locale:</span> <span class="pre">UTF-8</span></tt> on Mac OS X</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config.html#tab-completion">Tab Completion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build.html">conda build Recipe Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../build.html#the-meta-yaml-file">The meta.yaml file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build.html#environment-variables-set-during-the-build-process">Environment variables set during the build process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build.html#environment-variables-that-affect-the-build-process">Environment variables that affect the build process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build.html#pre-post-link-unlink-scripts">Pre/Post link/unlink scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build.html#post-build-version">Post-build version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build.html#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build.html#making-packages-relocatable">Making Packages Relocatable</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../build_tutorials.html">Build tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Tutorial: Basic tutorial for building a Conda package</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgis.html">Tutorial: Building the postgis package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">Administrative channel management for a centralized conda installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../custom-channels.html">Custom Channels</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../commands.html">Command Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../commands/conda-bundle.html">conda bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/conda-clean.html">conda clean</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/conda-config.html">conda config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/conda-create.html">conda create</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/conda-help.html">conda help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/conda-info.html">conda info</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/conda-init.html">conda init</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/conda-install.html">conda install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/conda-list.html">conda list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/conda-package.html">conda package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/conda-remove.html">conda remove</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/conda-run.html">conda run</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/conda-search.html">conda search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/conda-uninstall.html">conda uninstall</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/conda-update.html">conda update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands.html#conda-build-commands">conda-build commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands.html#conda-env-commands">conda-env commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands.html#conda-pip-rosetta-stone">conda-pip rosetta stone</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../build-commands.html">conda-build commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../commands/build/conda-build.html">conda build</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/build/conda-convert.html">conda convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/build/conda-develop.html">conda develop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/build/conda-index.html">conda index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/build/conda-inspect.html">conda inspect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/build/conda-inspect-linkages.html">conda inspect linkages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/build/conda-metapackage.html">conda metapackage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/build/conda-pipbuild.html">conda pipbuild</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/build/conda-skeleton.html">conda skeleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/build/conda-skeleton-cpan.html">conda skeleton cpan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/build/conda-skeleton-cran.html">conda skeleton cran</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/build/conda-skeleton-pypi.html">conda skeleton pypi</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../env-commands.html">conda-env commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../commands/env/conda-env.html">conda env</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/env/conda-env-create.html">conda env create</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/env/conda-env-export.html">conda env export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/env/conda-env-list.html">conda env list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/env/conda-env-remove.html">conda env remove</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/env/conda-env-update.html">conda env update</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../spec.html">Conda package specification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../spec.html#package-metadata">Package metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec.html#link-and-unlink-scripts">Link and unlink scripts:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec.html#repository-structure-and-index">Repository structure and index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec.html#package-match-specifications">Package Match Specifications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../travis.html">Using Conda with Travis CI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../travis.html#the-travis-yml">The .travis.yml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../travis.html#additional-steps">Additional Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../travis.html#building-a-conda-recipe">Building a Conda Recipe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../travis.html#appveyor">AppVeyor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bdist_conda.html">setup.py bdist_conda</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../bdist_conda.html#notes">Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bdist_conda.html#options">Options</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Conda</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../build_tutorials.html">Build tutorials</a> &raquo;</li>
      
    <li>Tutorial: Basic tutorial for building a Conda package</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="https://github.com/conda/conda-docs/edit/master/docs/source/build_tutorials/pkgs.rst" class="fa fa-github"> Edit on GitHub</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="tutorial-basic-tutorial-for-building-a-conda-package">
<h1>Tutorial: Basic tutorial for building a Conda package<a class="headerlink" href="#tutorial-basic-tutorial-for-building-a-conda-package" title="Permalink to this headline">¶</a></h1>
<p>Continuum&#8217;s Conda toolset provides cross-platform binary package management.
Originally built to furnish Python distributions, the tools are in active
development and being applied in many use cases. This tutorial explores what
goes into building conda packages, particularly for a typical Python package
built with</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python setup.py install
</pre></div>
</div>
<p>Conda packaging can be as simple as issuing a one-line command. Linked
libraries are located relative to the binary (rather than referenced with
absolute paths) and the software is bundled and ready to ship.</p>
<p>Other package builds are not trivial, especially if complex dependencies are
involved or the package was built in an ad-hoc way that does not conform to
the usual placement of files relative to one another. This tutorial will move
through the gradations of difficulty to illustrate both the potential and
challenges of using conda to package and distribute your software.</p>
<div class="section" id="install-conda-and-conda-build">
<h2>Install conda and conda-build<a class="headerlink" href="#install-conda-and-conda-build" title="Permalink to this headline">¶</a></h2>
<p>Conda is installed as part of <a class="reference external" href="https://store.continuum.io/cshop/anaconda/">Continuum&#8217;s Anaconda</a> distribution. A lightweight
standalone distribution called <a class="reference external" href="http://conda.pydata.org/miniconda.html">Miniconda</a> is also available, which is what
this tutorial will assume. Upon downloading the installer script, make sure
that this installer has appropriate permissions:</p>
<p>On Linux and Mac OS X, run <tt class="docutils literal"><span class="pre">bash</span></tt> on the Miniconda installer, like</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>bash Miniconda-3.5.2-Linux-x86_64.sh
</pre></div>
</div>
<p>(you may need to replace the filename with the correct filename for the
installer you downloaded)</p>
<p>On Windows, open and run the .exe installer.</p>
<p>You will not need administrative access to run Conda or manage Conda
environments.</p>
<p>Provide the script with your choices about where to install conda and whether
or not the path will be added to your environment. This tutorial will assume
it is added to the path; otherwise you will have to know the explicit path to
your conda executable.</p>
<p>Once Conda is installed, relaunch a terminal window and confirm that:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>conda info
</pre></div>
</div>
<p>finds the executable where you have just installed it. If you did not add Anaconda
or Miniconda to your PATH (the default option) you will have to supply its
path explicitly.</p>
<p>It&#8217;s a useful habit to do:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>conda update conda
</pre></div>
</div>
<p>with a fresh install. You can run the <tt class="docutils literal"><span class="pre">update</span></tt> command for any installed
package, including conda itself. This intrinsic bootstrapping capacity makes
conda very powerful. In fact, if you started with the Miniconda installation,
you can expand it to the full <a class="reference external" href="https://store.continuum.io/cshop/anaconda/">Anaconda
distribution</a> with:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>conda install anaconda
</pre></div>
</div>
<p>but that&#8217;s not the focus here.</p>
<p>What you do need to install is <tt class="docutils literal"><span class="pre">conda-build</span></tt>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>conda install conda-build
</pre></div>
</div>
<p>On Linux, you may also need to install <tt class="docutils literal"><span class="pre">patchelf</span></tt>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>conda install patchelf
</pre></div>
</div>
</div>
<div class="section" id="clone-conda-recipes-from-github">
<h2>Clone conda-recipes from GitHub<a class="headerlink" href="#clone-conda-recipes-from-github" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://github.com/conda/conda-recipes">conda recipes</a> repo on GitHub
has many example conda recipes. This is not a necessary step to build your own
packages, but it&#8217;s a very useful resource to investigate existing recipes for
similar packages to the one you are trying to build. In many cases, a recipe
for the package you are trying to build may already exist there. If you do not
have git installed you will need to install it first.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git clone https://github.com/conda/conda-recipes
</pre></div>
</div>
<p>After getting familiar with full process of package building, feel free to add
your own new recipes to this repository by making a pull request.</p>
<div class="section" id="elementary-conda-package-building">
<h3>Elementary Conda Package Building<a class="headerlink" href="#elementary-conda-package-building" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="using-conda-skeleton-to-build-from-a-pypi-package">
<h2>Using conda skeleton to build from a PyPI package<a class="headerlink" href="#using-conda-skeleton-to-build-from-a-pypi-package" title="Permalink to this headline">¶</a></h2>
<p>It is easy to build a skeleton recipe for any Python package that is hosted on
<a class="reference external" href="https://pypi.python.org/">PyPI</a>.</p>
<p>Let&#8217;s generate a new conda recipe for <a class="reference external" href="https://github.com/joerick/pyinstrument">pyinstrument</a>, by using
<a class="reference external" href="https://pypi.python.org/">PyPI</a> metadata:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> ~/
<span class="nv">$ </span>conda skeleton pypi pyinstrument
</pre></div>
</div>
<p>You should verify the
existence of the <tt class="docutils literal"><span class="pre">meta.yaml</span></tt>, <tt class="docutils literal"><span class="pre">build.sh</span></tt>, and <tt class="docutils literal"><span class="pre">bld.bat</span></tt> files in a newly created
directory called <tt class="docutils literal"><span class="pre">pyinstrument</span></tt>.</p>
<p>You should always check the <tt class="docutils literal"><span class="pre">meta.yaml</span></tt> file output from the <tt class="docutils literal"><span class="pre">skeleton</span></tt>
subcommand invocation, as it is not perfect, and it often requires some things
to be filled in manually. For instance, some packages do not specify
dependencies properly in their setup.py, so they will need to be added
manually. Some hints for Python package dependencies:</p>
<ul class="simple">
<li>If you get an error saying that setuptools downloading is disabled during
conda build, this means that setuptools is trying to download and install a
dependency of the package. Dependencies should be split out into separate
packages, so this is disallowed, as it would create a single package with
all the dependencies. The fix is to add this package as both a run and build
time dependency in the <tt class="docutils literal"><span class="pre">requirements</span></tt> section of the meta.yaml.</li>
<li>If the build or test fails with an ImportError for an external library, it
means it needs to depend on it.</li>
<li>If a build fails with an ImportError for pkg_resources, it means it needs to
depend on setuptools (or alternately, you can write a patch for the package
that removes the runtime dependence on pkg_resources).</li>
</ul>
<p>Now, it should be straightforward to use the <tt class="docutils literal"><span class="pre">conda</span> <span class="pre">build</span></tt> tool. Let&#8217;s try it:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>conda build pyinstrument
</pre></div>
</div>
<p>Now everything works great and the package was saved to
~/miniconda/conda-bld/linux-64/pyinstrument-0.12_py270.tar.bz2 file. The exact
location of the file may be a little different for you, depending on where you
have conda installed and what operating system you are using. conda build will
tell you where the file is located at the end of the build.</p>
<p>Later you will upload this package to Binstar, but for now, you can install it
with the <tt class="docutils literal"><span class="pre">--use-local</span></tt> flag.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>conda install --use-local pyinstrument
</pre></div>
</div>
</div>
<div class="section" id="building-packages-for-other-platforms">
<h2>Building packages for other platforms<a class="headerlink" href="#building-packages-for-other-platforms" title="Permalink to this headline">¶</a></h2>
<p>Once a package is built for the current platform with <tt class="docutils literal"><span class="pre">conda</span> <span class="pre">build</span></tt>,
you can convert it for use on other platforms with the <tt class="docutils literal"><span class="pre">conda</span> <span class="pre">convert</span></tt> command
and a <tt class="docutils literal"><span class="pre">-p</span></tt> platform specifier from <tt class="docutils literal"><span class="pre">{osx-64,linux-32,linux-64,win-32,win-64,all}</span></tt>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>conda convert -p all ~/miniconda/conda-bld/linux-64/pyinstrument-0.12_py270.tar.bz2 -o outputdir/
</pre></div>
</div>
<p>These converted packages can then also be individually uploaded to Binstar.</p>
</div>
<div class="section" id="writing-the-meta-yaml-by-hand">
<h2>Writing the meta.yaml by hand<a class="headerlink" href="#writing-the-meta-yaml-by-hand" title="Permalink to this headline">¶</a></h2>
<p>Suppose you stick with the same package, <tt class="docutils literal"><span class="pre">pyinstrument</span></tt>, but don&#8217;t start
from conda skeleton pypi. You can fill in the values in <tt class="docutils literal"><span class="pre">meta.yaml</span></tt>
manually, based on other conda recipes and information about where to download
the tarball.</p>
<p>The easiest way to do this is to start from an existing example from the
<a class="reference external" href="https://github.com/conda/conda-recipes">conda-recipes</a> repo.  Take the
<tt class="docutils literal"><span class="pre">meta.yaml</span></tt> file from the <tt class="docutils literal"><span class="pre">pyfaker</span></tt> package:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">package</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">pyfaker</span>

<span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">git_tag</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.3.2</span>
  <span class="l-Scalar-Plain">git_url</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">https://github.com/tpn/faker.git</span>

<span class="l-Scalar-Plain">requirements</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">build</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">python</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">setuptools</span>

  <span class="l-Scalar-Plain">run</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">python</span>

<span class="l-Scalar-Plain">test</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">imports</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">faker</span>

<span class="l-Scalar-Plain">about</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">home</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">http://www.joke2k.net/faker</span>
  <span class="l-Scalar-Plain">license</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">MIT</span>
</pre></div>
</div>
<p>With a search on the <a class="reference external" href="https://github.com/joerick/pyinstrument">GitHub site of
pyinstrument</a> and some sensible
choices for substitutions, you get a makeshift .yaml for <tt class="docutils literal"><span class="pre">pyinstrument</span></tt>:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">package</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">pyinstrument</span>

<span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">git_tag</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.12</span>
  <span class="l-Scalar-Plain">git_url</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">https://github.com/joerick/pyinstrument.git</span>

<span class="l-Scalar-Plain">requirements</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">build</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">python</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">setuptools</span>

  <span class="l-Scalar-Plain">run</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">python</span>

<span class="l-Scalar-Plain">test</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">imports</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">pyinstrument</span>

<span class="l-Scalar-Plain">about</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">home</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">https://github.com/joerick/pyinstrument</span>
  <span class="l-Scalar-Plain">license</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">BSD</span>
  <span class="l-Scalar-Plain">summary</span><span class="p-Indicator">:</span> <span class="s">&quot;Call</span><span class="nv"> </span><span class="s">stack</span><span class="nv"> </span><span class="s">profiler</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">Python.</span><span class="nv"> </span><span class="s">Inspired</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">Apple&#39;s</span><span class="nv"> </span><span class="s">Instruments.app&quot;</span>
</pre></div>
</div>
<p>This seems reasonable. Being sure to supply <tt class="docutils literal"><span class="pre">build.sh</span></tt> and <tt class="docutils literal"><span class="pre">bld.bat</span></tt> files in the
same directory. For Python packages, these can just be <tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span>
<span class="pre">install</span></tt> for both.</p>
<p>Note that the original recipe was built using a tarball from PyPI:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">fn</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">pyinstrument-0.12.tar.gz</span>
<span class="l-Scalar-Plain">url</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">https://pypi.python.org/packages/source/p/pyinstrument/pyinstrument-0.12.tar.gz</span>
</pre></div>
</div>
<p>whereas this one was built using a git url and a git tag:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">git_tag</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.12</span>
<span class="l-Scalar-Plain">git_url</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">https://github.com/joerick/pyinstrument.git</span>
</pre></div>
</div>
<p>Both ways should work just fine. As the source should be identical. For some C
packages, building from a tarball may be preferable to building from git, as
building from git requires more build tools, such as autoconf. For pure Python
packages such as pyinstrument, there is generally no difference.</p>
<p>There is more information about all the values that can go in the
<tt class="docutils literal"><span class="pre">meta.yaml</span></tt> file on the <a class="reference internal" href="../build.html#build"><em>conda build Recipe Reference</em></a> page.</p>
</div>
<div class="section" id="uploading-packages-to-binstar-org">
<h2>Uploading packages to <a class="reference external" href="https://binstar.org">binstar.org</a><a class="headerlink" href="#uploading-packages-to-binstar-org" title="Permalink to this headline">¶</a></h2>
<p>All of above steps produce one object - the package (a tar.bz2
archive). During package building process you were asked if the package should
be uploaded to <a class="reference external" href="https://binstar.org">binstar.org</a>. To get more info about
<a class="reference external" href="https://binstar.org">binstar.org</a> visit <a class="reference external" href="http://docs.binstar.org/">the Binstar documentation page</a>.</p>
<p>Here is a minimal summary. First, you need the <tt class="docutils literal"><span class="pre">binstar</span></tt> command line
client. Install this tool by running:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>conda install binstar
</pre></div>
</div>
<p>Now you should <a class="reference external" href="https://binstar.org/account/register">register an account on binstar.org</a>.  Then login with the <tt class="docutils literal"><span class="pre">binstar</span></tt>
command</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>binstar login
</pre></div>
</div>
<p>One this is done, you are ready to upload your package.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>binstar upload ~/miniconda/conda-bld/linux-64/pyinstrument-0.12-py27_0.tar.bz
</pre></div>
</div>
<p>Replace this path with the path to the package printed at the end of conda
build.</p>
<p>If you always want conda build to upload to Binstar after a successful build,
you can run</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>conda config --set binstar_upload yes
</pre></div>
</div>
<p>If you then want to install these packages, it is recommended to add your
Binstar channel to the conda configuration, so that conda will always search
your channel in addition to the default Continuum ones.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>conda config --add channels your_username
</pre></div>
</div>
<p>(replace <tt class="docutils literal"><span class="pre">your_username</span></tt> with your Binstar username).</p>
</div>
<div class="section" id="searching-for-already-existing-packages">
<h2>Searching for already existing packages<a class="headerlink" href="#searching-for-already-existing-packages" title="Permalink to this headline">¶</a></h2>
<p>You have two methods to accomplish this task. First option is to use <tt class="docutils literal"><span class="pre">conda</span>
<span class="pre">search</span></tt>. <tt class="docutils literal"><span class="pre">conda</span></tt> searches all the channels configured from the <tt class="docutils literal"><span class="pre">.condarc</span></tt>
file for the given string. You can see what channels are searched by running</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>conda info
</pre></div>
</div>
<p>If there is no <tt class="docutils literal"><span class="pre">.condarc</span></tt> file, conda only searches the default Continuum
channels, which are officially maintained by <a class="reference external" href="http://continuum.io/">Continuum Analytics</a>. This includes all the packages from the Anaconda
distribution.</p>
<p>For example, to search for the <tt class="docutils literal"><span class="pre">sympy</span></tt> package, type</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>conda search sympy
</pre></div>
</div>
<p>Sometimes you may want to follow a person who is constantly building new
packages and publishing them on <a class="reference external" href="https://binstar.org">binstar.org</a>. To be
able to use those packages you have to add appropriate channel of that person
to your <tt class="docutils literal"><span class="pre">~/.condarc</span></tt> file, just like this:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">channels</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">defaults</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">asmeurer</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">mutirri</span>
</pre></div>
</div>
<p>In this example you have added two new channels (of <tt class="docutils literal"><span class="pre">asmeurer</span></tt> and
<tt class="docutils literal"><span class="pre">mutirri</span></tt>).  Note that for Binstar channels, it is only necessary to enter
the username of the person. You can also add the full channel url, like
<tt class="docutils literal"><span class="pre">https://conda.binstar.org/asmeurer</span></tt>.</p>
<p>From now on you will be able to search for any package in these users&#8217; package
lists, and install them too.</p>
<p>Another way to do this is through the command line using the <tt class="docutils literal"><span class="pre">conda</span> <span class="pre">config</span></tt>
option.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">$ conda config --add channels asmeurer</span>
<span class="l-Scalar-Plain">$ conda config --add channels mutirri</span>
</pre></div>
</div>
<p>The order of the channels matters. If two channels have the same version of
the same package, the one from higher in the list will be chosen.  The <tt class="docutils literal"><span class="pre">conda</span>
<span class="pre">config</span></tt> command will always prepend the channel (add it to the top of the
list).</p>
<p>You can also search all of Binstar, without adding channels to the
<tt class="docutils literal"><span class="pre">.condarc</span></tt> file using the <tt class="docutils literal"><span class="pre">binstar</span></tt> command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>binstar search sympy
</pre></div>
</div>
<p>This command will search through all users&#8217; packages on <a class="reference external" href="http://binstar.org">binstar.org</a>.  <strong>But remember</strong>, to be able to install a package
which was found in this way, you still have to add the appropriate user&#8217;s channel
to your <tt class="docutils literal"><span class="pre">.condarc</span></tt> file.</p>
<p>Another way to do this is to run the conda tool with the <tt class="docutils literal"><span class="pre">-c</span></tt> flag, which
adds the channel just for that one command. For example, to install the
<tt class="docutils literal"><span class="pre">pyinstrument</span></tt> package from <tt class="docutils literal"><span class="pre">asmeurer</span></tt>&#8216;s Binstar channel, run</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>conda install -c asmeurer pyinstrument
</pre></div>
</div>
<p>For more information about this topic, see the <a class="reference external" href="http://docs.binstar.org/">binstar.org documentation page</a>.</p>
</div>
<div class="section" id="additional-references">
<h2>Additional References<a class="headerlink" href="#additional-references" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://www.peterbronez.com/Using%20PyPi%20Packages%20with%20Conda">Using PyPI packages for conda</a></p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="postgis.html" class="btn btn-neutral float-right" title="Tutorial: Building the postgis package">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../build_tutorials.html" class="btn btn-neutral" title="Build tutorials"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Continuum Analytics.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:' ',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>